<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Bus Pass — Dashboard</title>
  <link rel="stylesheet" href="./stylesheet/style-dashboard.css" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
</head>
<body>
  <div id="loader" class="loader" style="display:none">Loading Dashboard...</div>

  <aside class="sidebar">
    <div class="sidebar-item active"><i class="bx bxs-dashboard"></i></div>
    <div class="sidebar-item"><i class="bx bxs-user-detail"></i></div>
    <div class="sidebar-item"><i class="bx bxs-help-circle"></i></div>
  </aside>

  <main class="main">
    <header style="display:flex; justify-content: space-between; align-items: center;">
      <h1 style="margin:0; color: var(--primary);">SmartBus Portal</h1>
      <div class="actions">
        <button class="btn alt" onclick="location.href='buyPass.html'">+ New Pass</button>
        <button class="btn" id="logoutBtn" style="background: #ff4d4d; color:#fff">Logout</button>
      </div>
    </header>

    <div class="dashboard-grid">
      <section>
        <div class="smart-card">
          <div class="card-left">
            <div>
              <p style="text-transform: uppercase; letter-spacing: 2px; opacity: 0.7; margin:0">Digital Transit Pass</p>
              <h2 id="currentPlanName" style="font-size: 2rem; margin: 10px 0;">No Active Pass</h2>
            </div>
            <div class="validity" id="validityEl">
              <small>VALID UNTIL</small><br>
              <strong id="expiryText">-- / -- / --</strong>
            </div>
          </div>
          <div class="card-right">
            <div id="qrContainer" class="wallet-qrcode">
              <i class='bx bx-qr' style="font-size: 80px; opacity: 0.2;"></i>
            </div>
            <p style="margin: 15px 0 0; font-weight: 600; opacity: 0.8;">WALLET BALANCE</p>
            <div class="wallet-balance" id="balance">₹0.00</div>
            <small id="walletId" style="font-family: monospace; opacity: 0.6;"></small>
          </div>
        </div>

        <div style="margin-top: 40px;">
          <h3 style="margin-bottom: 20px;">Recent Activity</h3>
          <div id="txList" class="transactions"></div>
        </div>
      </section>

      <aside>
        <div class="profile-card">
          <div style="text-align: center; margin-bottom: 20px;">
            <div style="font-size: 50px; color: var(--primary);"><i class='bx bxs-user-circle'></i></div>
            <h3 id="hiUser" style="margin: 5px 0;">User Name</h3>
          </div>
          <div id="userInfo">
            </div>
        </div>
      </aside>
    </div>
  </main>

  <script defer src="./scripts/dashboard.js"></script>
</body>
</html>